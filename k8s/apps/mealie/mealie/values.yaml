replicaCount: 1

image:
  repository: ghcr.io/mealie-recipes/mealie
  tag: v3.11.0
  pullPolicy: IfNotPresent

service:
  port: 80
  targetPort: 9000

app:
  host: mealy.schober.dev
  gateway:
    name: internal-gateway
    namespace: istio-ingress-internal
    sectionName: https
  backendServiceName: mealie
  servicePort: 80

mealie:
  env:
    ALLOW_SIGNUP: "false"
    PUID: "1000"
    PGID: "1000"
    TZ: Europe/Vienna
    BASE_URL: https://mealy.schober.dev
    DB_ENGINE: postgres
  extraEnv: []
  secretKey:
    enabled: true
    secretName: mealie-secret
    secretKey: SECRET_KEY

authentik:
  enabled: true
  providerName: authentik
  configurationUrl: https://auth.schober.dev/application/o/mealie/.well-known/openid-configuration
  clientId: mealie
  clientSecret:
    secretName: mealie-secret
    secretKey: OIDC_CLIENT_SECRET
  signupEnabled: true
  autoRedirect: true
  rememberMe: true
  groups:
    users: mealie-users
    admins: mealie-admins

persistence:
  enabled: true
  claimName: mealie-data
  accessMode: ReadWriteOnce
  storageClass: proxmox-csi
  size: 5Gi
  mountPath: /app/data

postgres:
  enabled: true
  clusterName: mealie-postgres
  instances: 1
  storage:
    class: proxmox-csi
    size: 10Gi
  database: mealie
  owner: mealie

database:
  secretName: mealie-postgres-app
  keys:
    host: host
    port: port
    dbname: dbname
    username: username
    password: password

externalSecret:
  enabled: true
  refreshInterval: 1h
  secretStoreRef:
    name: bitwarden
    kind: ClusterSecretStore
  keys:
    secretKey: mealie-secret-key
    oidcClientSecret: authentik-mealie-client-secret
