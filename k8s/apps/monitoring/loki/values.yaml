loki:
  # Use single binary deployment mode (non-HA)
  deploymentMode: SingleBinary
  
  loki:
    # Disable auth for homelab simplicity
    auth_enabled: false

    # Simple schema config for homelab
    schemaConfig:
      configs:
        - from: "2024-01-01"
          store: tsdb
          object_store: filesystem
          schema: v13
          index:
            prefix: index_
            period: 24h
    
    storage:
      type: filesystem

    # Ruler storage configuration
    rulerConfig:
      storage:
        type: local
        local:
          directory: /var/loki/rules
    
    # Single replica
    commonConfig:
      replication_factor: 1

  # Disable write and read deployments (using singleBinary)
  write:
    replicas: 0
  
  read:
    replicas: 0
  
  backend:
    replicas: 0
  
  # Single binary mode with persistence
  singleBinary:
    replicas: 1
    persistence:
      enabled: false
    extraVolumes:
      - name: loki-data
        emptyDir: {}
    extraVolumeMounts:
      - name: loki-data
        mountPath: /var/loki

  # Disable all caches to save memory
  chunksCache:
    enabled: false

  resultsCache:
    enabled: false

  # Disable test components
  lokiCanary:
    enabled: false

  test:
    enabled: false
